(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[913],{7599:function(e,t,s){Promise.resolve().then(s.bind(s,5595))},5025:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(3827);function i(e){let{onClick:t}=e;return(0,n.jsx)("button",{onClick:t,className:"p-2 rounded-full bg-pink-600 hover:bg-pink-500 text-white shadow-lg shadow-pink-500/40",title:"Send a gift",children:"\uD83C\uDF81"})}},1400:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(3827),i=s(4090);let l={roses:"bg-rose-500",explosion:"bg-black",car:"bg-slate-900"};function r(e){let{activeGift:t,onEnd:s}=e,[r,a]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{t&&a(!0)},[t]),!t||!r)return null;let c=l[t.background]||"bg-black";return(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center ".concat(c," bg-opacity-90"),children:[(0,n.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:["roses"===t.background&&(0,n.jsx)("div",{className:"w-full h-full animate-pulse opacity-60"}),"explosion"===t.background&&(0,n.jsx)("div",{className:"w-full h-full animate-[ping_1.5s_ease-out_infinite] bg-gradient-to-br from-orange-500 via-yellow-400 to-red-700 opacity-60"}),"car"===t.background&&(0,n.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-slate-900 via-slate-700 to-slate-900 opacity-70"})]}),(0,n.jsx)("video",{src:t.videoUrl,autoPlay:!0,playsInline:!0,className:"relative z-10 max-w-[80vw] max-h-[80vh] rounded-2xl shadow-2xl border border-white/20",onEnded:()=>{a(!1),s&&s()},onError:()=>{a(!1),s&&s()}}),(0,n.jsxs)("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 z-20 text-center text-white",children:[(0,n.jsx)("div",{className:"text-xs uppercase tracking-[0.3em] opacity-70",children:"Gift Received"}),(0,n.jsx)("div",{className:"text-2xl font-semibold mt-1",children:t.title})]})]})}},7998:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(3827),i=s(4090);function l(e){let{isOpen:t,onClose:s,onSendGift:l}=e,[r,a]=(0,i.useState)([]),[c,o]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{t&&(o(!0),fetch("/api/gifts").then(e=>e.json()).then(e=>a(e)).finally(()=>o(!1)))},[t]),t)?(0,n.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/70",children:(0,n.jsxs)("div",{className:"bg-zinc-950 border border-zinc-800 rounded-2xl w-full max-w-3xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800",children:[(0,n.jsx)("div",{className:"text-sm uppercase tracking-[0.3em] text-zinc-400",children:"Choose a Gift"}),(0,n.jsx)("button",{onClick:s,className:"text-zinc-400 hover:text-white text-xs",children:"Close"})]}),(0,n.jsxs)("div",{className:"p-4 overflow-y-auto",children:[c&&(0,n.jsx)("div",{className:"text-zinc-500 text-sm",children:"Loading gifts…"}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:r.map(e=>(0,n.jsxs)("button",{onClick:()=>l(e),className:"group relative bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden hover:border-zinc-500 transition",children:[(0,n.jsx)("div",{className:"aspect-video bg-black",children:(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs text-zinc-500",children:e.title})}),(0,n.jsxs)("div",{className:"p-3 text-left",children:[(0,n.jsx)("div",{className:"text-sm text-white font-medium truncate",children:e.title}),(0,n.jsxs)("div",{className:"text-xs text-zinc-400 mt-1",children:[e.tier," • ",e.price," credits"]})]}),(0,n.jsx)("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition"})]},e.id))})]})]})}):null}},5595:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(3827),i=s(4090),l=s(7998),r=s(5025),a=s(1400);function c(){let e=(0,i.useRef)(null),t=(0,i.useRef)(null),[s,c]=(0,i.useState)(null),[o,d]=(0,i.useState)(null),[u,x]=(0,i.useState)(null),[f,m]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let s=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]});c(s);let n=s.createDataChannel("gifts");return d(n),n.onmessage=e=>{try{let t=JSON.parse(e.data);x(t)}catch(e){console.error("Invalid gift data:",e)}},s.ontrack=e=>{t.current&&(t.current.srcObject=e.streams[0])},navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(t=>{e.current&&(e.current.srcObject=t),t.getTracks().forEach(e=>s.addTrack(e,t))}),()=>s.close()},[]),(0,n.jsxs)("main",{className:"relative min-h-screen bg-black text-white flex items-center justify-center",children:[(0,n.jsxs)("div",{className:"relative w-full max-w-5xl flex items-center justify-center",children:[(0,n.jsx)("video",{ref:t,autoPlay:!0,playsInline:!0,className:"w-full rounded-xl shadow-lg"}),(0,n.jsx)("video",{ref:e,autoPlay:!0,muted:!0,playsInline:!0,className:"absolute bottom-4 right-4 w-40 rounded-lg border border-white/20 shadow-lg"})]}),(0,n.jsx)(r.Z,{onClick:()=>m(!0)}),(0,n.jsx)(l.Z,{isOpen:f,onClose:()=>m(!1),onSendGift:e=>{o&&"open"===o.readyState&&(o.send(JSON.stringify(e)),x(e)),m(!1)}}),u&&(0,n.jsx)(a.Z,{gift:u,onFinish:()=>x(null)})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=7599)}),_N_E=e.O()}]);